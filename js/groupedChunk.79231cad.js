(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["groupedChunk"],{"00b4":function(e,t,n){"use strict";n("ac1f");var r=n("23e7"),a=n("da84"),o=n("c65b"),i=n("e330"),c=n("1626"),s=n("861d"),u=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),l=a.Error,d=i(/./.test);r({target:"RegExp",proto:!0,forced:!u},{test:function(e){var t=this.exec;if(!c(t))return d(this,e);var n=o(t,this,e);if(null!==n&&!s(n))throw new l("RegExp exec method returned something other than an Object or null");return!!n}})},"04d1":function(e,t,n){var r=n("342f"),a=r.match(/firefox\/(\d+)/i);e.exports=!!a&&+a[1]},"0d03":function(e,t,n){var r=n("e330"),a=n("6eeb"),o=Date.prototype,i="Invalid Date",c="toString",s=r(o[c]),u=r(o.getTime);String(new Date(NaN))!=i&&a(o,c,(function(){var e=u(this);return e===e?s(this):i}))},"25f0":function(e,t,n){"use strict";var r=n("e330"),a=n("5e77").PROPER,o=n("6eeb"),i=n("825a"),c=n("3a9b"),s=n("577e"),u=n("d039"),l=n("ad6d"),d="toString",b=RegExp.prototype,f=b[d],p=r(l),g=u((function(){return"/a/b"!=f.call({source:"a",flags:"b"})})),m=a&&f.name!=d;(g||m)&&o(RegExp.prototype,d,(function(){var e=i(this),t=s(e.source),n=e.flags,r=s(void 0===n&&c(b,e)&&!("flags"in b)?p(e):n);return"/"+t+"/"+r}),{unsafe:!0})},"277d":function(e,t,n){var r=n("23e7"),a=n("e8b5");r({target:"Array",stat:!0},{isArray:a})},"408a":function(e,t,n){var r=n("e330");e.exports=r(1..valueOf)},"4df4":function(e,t,n){"use strict";var r=n("da84"),a=n("0366"),o=n("c65b"),i=n("7b0b"),c=n("9bdd"),s=n("e95a"),u=n("68ee"),l=n("07fa"),d=n("8418"),b=n("9a1f"),f=n("35a1"),p=r.Array;e.exports=function(e){var t=i(e),n=u(this),r=arguments.length,g=r>1?arguments[1]:void 0,m=void 0!==g;m&&(g=a(g,r>2?arguments[2]:void 0));var v,h,O,j,y,x,w=f(t),_=0;if(!w||this==p&&s(w))for(v=l(t),h=n?new this(v):p(v);v>_;_++)x=m?g(t[_],_):t[_],d(h,_,x);else for(j=b(t,w),y=j.next,h=n?new this:[];!(O=o(y,j)).done;_++)x=m?c(j,g,[O.value,_],!0):O.value,d(h,_,x);return h.length=_,h}},"4e82":function(e,t,n){"use strict";var r=n("23e7"),a=n("e330"),o=n("59ed"),i=n("7b0b"),c=n("07fa"),s=n("577e"),u=n("d039"),l=n("addb"),d=n("a640"),b=n("04d1"),f=n("d998"),p=n("2d00"),g=n("512c"),m=[],v=a(m.sort),h=a(m.push),O=u((function(){m.sort(void 0)})),j=u((function(){m.sort(null)})),y=d("sort"),x=!u((function(){if(p)return p<70;if(!(b&&b>3)){if(f)return!0;if(g)return g<603;var e,t,n,r,a="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)m.push({k:t+r,v:n})}for(m.sort((function(e,t){return t.v-e.v})),r=0;r<m.length;r++)t=m[r].k.charAt(0),a.charAt(a.length-1)!==t&&(a+=t);return"DGBEFHACIJK"!==a}})),w=O||!j||!y||!x,_=function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:s(t)>s(n)?1:-1}};r({target:"Array",proto:!0,forced:w},{sort:function(e){void 0!==e&&o(e);var t=i(this);if(x)return void 0===e?v(t):v(t,e);var n,r,a=[],s=c(t);for(r=0;r<s;r++)r in t&&h(a,t[r]);l(a,_(e)),n=a.length,r=0;while(r<n)t[r]=a[r++];while(r<s)delete t[r++];return t}})},"512c":function(e,t,n){var r=n("342f"),a=r.match(/AppleWebKit\/(\d+)\./);e.exports=!!a&&+a[1]},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var r=n("e330"),a=n("1d80"),o=n("577e"),i=n("5899"),c=r("".replace),s="["+i+"]",u=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),d=function(e){return function(t){var n=o(a(t));return 1&e&&(n=c(n,u,"")),2&e&&(n=c(n,l,"")),n}};e.exports={start:d(1),end:d(2),trim:d(3)}},7156:function(e,t,n){var r=n("1626"),a=n("861d"),o=n("d2bb");e.exports=function(e,t,n){var i,c;return o&&r(i=t.constructor)&&i!==n&&a(c=i.prototype)&&c!==n.prototype&&o(e,c),e}},"8dc3":function(e,t,n){"use strict";n.r(t);n("4e82"),n("b0c0");var r=n("7a23"),a={class:"w-full mb-8 py-14 text-center text-white relative"},o=Object(r["i"])("div",{class:"absolute inset-0 w-full h-full box-border bg-contain music-bg",style:{"background-image":"url(/assets/img/song-header.png)"}},null,-1),i={class:"container mx-auto flex items-center"},c={class:"z-50 text-left ml-8"},s={class:"text-3xl font-bold"},u={class:"container mx-auto mt-6",id:"comments"},l={class:"bg-white rounded border border-gray-200 relative flex flex-col"},d={class:"px-6 pt-6 pb-5 font-bold border-b border-gray-200"},b={class:"card-title"},f=Object(r["i"])("i",{class:"fa fa-comments float-right text-green-400 text-2xl"},null,-1),p={class:"p-6"},g=["disabled"],m=Object(r["i"])("option",{value:"1"},"Latest",-1),v=Object(r["i"])("option",{value:"2"},"Oldest",-1),h=[m,v],O={class:"container mx-auto"},j={class:"mb-5"},y={class:"font-bold"};function x(e,t,n,m,v,x){var w=Object(r["I"])("app-player"),_=Object(r["I"])("vee-field"),k=Object(r["I"])("ErrorMessage"),S=Object(r["I"])("vee-form");return Object(r["A"])(),Object(r["h"])("main",null,[Object(r["i"])("section",a,[o,Object(r["i"])("div",i,[Object(r["i"])("button",{type:"button",class:"z-50 h-24 w-24 text-3xl bg-white text-black rounded-full focus:outline-none",onClick:t[0]||(t[0]=Object(r["V"])((function(t){return e.newSong(v.song)}),["prevent"]))},[Object(r["i"])("i",{class:Object(r["t"])(["fa text-gray-500 text-xl",{"fa-play":!e.playing,"fa-pause":e.playing}])},null,2)]),Object(r["i"])("div",c,[Object(r["i"])("div",s,Object(r["L"])(v.song.modified_name),1),Object(r["i"])("div",null,Object(r["L"])(v.song.genre),1)])])]),Object(r["k"])(w),Object(r["i"])("section",u,[Object(r["i"])("div",l,[Object(r["i"])("div",d,[Object(r["i"])("span",b,Object(r["L"])(e.$tc("song.comment_count",v.song.comment_count,{count:v.song.comment_count})),1),f]),Object(r["i"])("div",p,[v.comment_show_alert?(Object(r["A"])(),Object(r["h"])("div",{key:0,class:Object(r["t"])(["text-white text-center font-bold p-4 mb-4",v.comment_alert_variant])},Object(r["L"])(v.comment_alert_message),3)):Object(r["g"])("",!0),e.userLoggedIn?(Object(r["A"])(),Object(r["f"])(S,{key:1,"validation-schema":v.schema,onSubmit:x.addComment},{default:Object(r["T"])((function(){return[Object(r["k"])(_,{as:"textarea",name:"comment",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded mb-4",placeholder:"Your comment here..."}),Object(r["k"])(k,{class:"text-red-600",name:"comment"}),Object(r["i"])("button",{type:"submit",class:"py-1.5 px-3 rounded text-white bg-green-600 block",disabled:v.comment_in_submission}," Submit ",8,g)]})),_:1},8,["validation-schema","onSubmit"])):Object(r["g"])("",!0),Object(r["U"])(Object(r["i"])("select",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return v.sort=e}),class:"block mt-4 py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded"},h,512),[[r["O"],v.sort]])])])]),Object(r["i"])("ul",O,[(Object(r["A"])(!0),Object(r["h"])(r["a"],null,Object(r["H"])(x.sortedComments,(function(e){return Object(r["A"])(),Object(r["h"])("li",{class:"p-6 bg-gray-50 border border-gray-200",key:e.docID},[Object(r["i"])("div",j,[Object(r["i"])("div",y,Object(r["L"])(e.name),1),Object(r["i"])("time",null,Object(r["L"])(e.datePosted),1)]),Object(r["i"])("p",null,Object(r["L"])(e.content),1)])})),128))])])}var w=n("1da1"),_=n("5530"),k=(n("96cf"),n("fb6a"),n("0d03"),n("d401"),n("d3b7"),n("25f0"),n("4160"),n("159b"),n("b79f")),S=n("5502"),E={class:"fixed bottom-0 left-0 bg-white p-5 pb-4 text-left align-top w-full h-16"},A={class:"relative"},I={class:"float-left w-7 h-7 leading-3"},L={class:"float-left w-7 h-7 leading-3 text-gray-400 mt-0 text-lg w-14 ml-5 mt-1"},R={class:"player-currenttime"},U={class:"float-left w-7 h-7 leading-3 ml-7 mt-2 player-scrub"},F={key:0,class:"absolute left-0 right-0 text-lg text-center mx-auto player-song-info"},C={class:"song-title"},D={class:"song-artist"},N=Object(r["i"])("i",{class:"fas fa-circle"},null,-1),P=[N],T={class:"float-left w-7 h-7 leading-1 text-gray-400 mt-0 text-lg w-14 ml-8 mt-1"},V={class:"player-duration"};function $(e,t,n,a,o,i){return Object(r["A"])(),Object(r["h"])("div",E,[Object(r["i"])("div",A,[Object(r["i"])("div",I,[Object(r["i"])("button",{type:"button",onClick:t[0]||(t[0]=Object(r["V"])((function(){return e.toggleAudio&&e.toggleAudio.apply(e,arguments)}),["prevent"]))},[Object(r["i"])("i",{class:Object(r["t"])(["fa text-gray-500 text-xl",{"fa-play":!e.playing,"fa-pause":e.playing}])},null,2)])]),Object(r["i"])("div",L,[Object(r["i"])("span",R,Object(r["L"])(e.seek),1)]),Object(r["i"])("div",U,[e.currentSong.modified_name?(Object(r["A"])(),Object(r["h"])("div",F,[Object(r["i"])("span",C,Object(r["L"])(e.currentSong.modified_name),1),Object(r["i"])("span",D," (Uploaded by "+Object(r["L"])(e.currentSong.display_name)+") ",1)])):Object(r["g"])("",!0),Object(r["i"])("span",{class:"block w-full h-2 rounded m-1 mt-2 bg-gray-200 relative cursor-pointer",onClick:t[1]||(t[1]=Object(r["V"])((function(){return e.updateSeek&&e.updateSeek.apply(e,arguments)}),["prevent"]))},[Object(r["i"])("span",{class:"absolute top-neg-8 text-gray-800 text-lg",style:Object(r["u"])({left:e.playerProgress})},P,4),Object(r["i"])("span",{class:"block h-2 rounded bg-gradient-to-r from-green-500 to-green-400",style:Object(r["u"])({width:e.playerProgress})},null,4)])]),Object(r["i"])("div",T,[Object(r["i"])("span",V,Object(r["L"])(e.duration),1)])])])}var M={components:{},name:"Player",computed:Object(_["a"])(Object(_["a"])({},Object(S["c"])(["playing"])),Object(S["e"])({seek:function(e){return e.player.seek},duration:function(e){return e.player.duration},playerProgress:function(e){return e.player.playerProgress},currentSong:function(e){return e.player.currentSong}})),methods:Object(_["a"])({},Object(S["b"])(["toggleAudio","updateSeek"]))},q=n("6b0d"),Y=n.n(q);const G=Y()(M,[["render",$]]);var H=G,z={name:"Song",components:{AppPlayer:H},data:function(){return{song:{},schema:{comment:"required|min:3"},comment_in_submission:!1,comment_show_alert:!1,comment_alert_variant:"bg-blue-500",comment_alert_message:"Please wait! Your comment is being submitted",comments:[],sort:"1"}},computed:Object(_["a"])(Object(_["a"])(Object(_["a"])({},Object(S["e"])({userLoggedIn:function(e){return e.auth.userLoggedIn}})),Object(S["c"])(["playing"])),{},{sortedComments:function(){var e=this;return this.comments.slice().sort((function(t,n){return"1"===e.sort?new Date(n.datePosted)-new Date(t.datePosted):new Date(t.datePosted)-new Date(n.datePosted)}))}}),beforeRouteEnter:function(e,t,n){return Object(w["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,k["c"].doc(e.params.id).get();case 2:r=t.sent,n((function(e){if(r.exists){var t=e.$route.query.sort;e.sort="1"===t||"2"===t?t:"1",e.song=r.data(),e.getComments()}else e.$router.push({name:"home"})}));case 4:case"end":return t.stop()}}),t)})))()},methods:Object(_["a"])(Object(_["a"])({},Object(S["b"])(["newSong"])),{},{addComment:function(e,t){var n=this;return Object(w["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.resetForm,n.comment_in_submission=!0,n.comment_show_alert=!0,n.comment_alert_variant="bg-blue-500",n.comment_alert_message="Please wait! Your comment is being submitted",o={content:e.comment,datePosted:(new Date).toString(),sid:n.$route.params.id,name:k["a"].currentUser.displayName,uid:k["a"].currentUser.uid},r.next=8,k["b"].add(o);case 8:return n.song.comment_count+=1,r.next=11,k["c"].doc(n.$route.params.id).update({comment_count:n.song.comment_count});case 11:n.getComments(),n.comment_in_submission=!1,n.comment_alert_variant="bg-green-500",n.comment_alert_message="Comment added!",a();case 16:case"end":return r.stop()}}),r)})))()},getComments:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,k["b"].where("sid","==",e.$route.params.id).get();case 2:n=t.sent,e.comments=[],n.forEach((function(t){return[e.comments.push(Object(_["a"])({docID:t.id},t.data()))]}));case 5:case"end":return t.stop()}}),t)})))()}}),watch:{sort:function(e){e!==this.$route.query.sort&&this.$router.push({query:{sort:e}})}}};const J=Y()(z,[["render",x]]);t["default"]=J},"9bdd":function(e,t,n){var r=n("825a"),a=n("2a62");e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(i){a(e,"throw",i)}}},a434:function(e,t,n){"use strict";var r=n("23e7"),a=n("da84"),o=n("23cb"),i=n("5926"),c=n("07fa"),s=n("7b0b"),u=n("65f0"),l=n("8418"),d=n("1dde"),b=d("splice"),f=a.TypeError,p=Math.max,g=Math.min,m=9007199254740991,v="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!b},{splice:function(e,t){var n,r,a,d,b,h,O=s(this),j=c(O),y=o(e,j),x=arguments.length;if(0===x?n=r=0:1===x?(n=0,r=j-y):(n=x-2,r=g(p(i(t),0),j-y)),j+n-r>m)throw f(v);for(a=u(O,r),d=0;d<r;d++)b=y+d,b in O&&l(a,d,O[b]);if(a.length=r,n<r){for(d=y;d<j-r;d++)b=d+r,h=d+n,b in O?O[h]=O[b]:delete O[h];for(d=j;d>j-r+n;d--)delete O[d-1]}else if(n>r)for(d=j-r;d>y;d--)b=d+r-1,h=d+n-1,b in O?O[h]=O[b]:delete O[h];for(d=0;d<n;d++)O[d+y]=arguments[d+2];return O.length=j-r+n,a}})},a630:function(e,t,n){var r=n("23e7"),a=n("4df4"),o=n("1c7e"),i=!o((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:i},{from:a})},a9e3:function(e,t,n){"use strict";var r=n("83ab"),a=n("da84"),o=n("e330"),i=n("94ca"),c=n("6eeb"),s=n("1a2d"),u=n("7156"),l=n("3a9b"),d=n("d9b5"),b=n("c04e"),f=n("d039"),p=n("241c").f,g=n("06cf").f,m=n("9bf2").f,v=n("408a"),h=n("58a8").trim,O="Number",j=a[O],y=j.prototype,x=a.TypeError,w=o("".slice),_=o("".charCodeAt),k=function(e){var t=b(e,"number");return"bigint"==typeof t?t:S(t)},S=function(e){var t,n,r,a,o,i,c,s,u=b(e,"number");if(d(u))throw x("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=h(u),t=_(u,0),43===t||45===t){if(n=_(u,2),88===n||120===n)return NaN}else if(48===t){switch(_(u,1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+u}for(o=w(u,2),i=o.length,c=0;c<i;c++)if(s=_(o,c),s<48||s>a)return NaN;return parseInt(o,r)}return+u};if(i(O,!j(" 0o1")||!j("0b1")||j("+0x1"))){for(var E,A=function(e){var t=arguments.length<1?0:j(k(e)),n=this;return l(y,n)&&f((function(){v(n)}))?u(Object(t),n,A):t},I=r?p(j):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),L=0;I.length>L;L++)s(j,E=I[L])&&!s(A,E)&&m(A,E,g(j,E));A.prototype=y,y.constructor=A,c(a,O,A)}},aa1f:function(e,t,n){"use strict";var r=n("83ab"),a=n("d039"),o=n("825a"),i=n("7c73"),c=n("e391"),s=Error.prototype.toString,u=a((function(){if(r){var e=i(Object.defineProperty({},"name",{get:function(){return this===e}}));if("true"!==s.call(e))return!0}return"2: 1"!==s.call({message:1,name:2})||"Error"!==s.call({})}));e.exports=u?function(){var e=o(this),t=c(e.name,"Error"),n=c(e.message);return t?n?t+": "+n:t:n}:s},ab36:function(e,t,n){var r=n("861d"),a=n("9112");e.exports=function(e,t){r(t)&&"cause"in t&&a(e,"cause",t.cause)}},addb:function(e,t,n){var r=n("4dae"),a=Math.floor,o=function(e,t){var n=e.length,s=a(n/2);return n<8?i(e,t):c(e,o(r(e,0,s),t),o(r(e,s),t),t)},i=function(e,t){var n,r,a=e.length,o=1;while(o<a){r=o,n=e[o];while(r&&t(e[r-1],n)>0)e[r]=e[--r];r!==o++&&(e[r]=n)}return e},c=function(e,t,n,r){var a=t.length,o=n.length,i=0,c=0;while(i<a||c<o)e[i+c]=i<a&&c<o?r(t[i],n[c])<=0?t[i++]:n[c++]:i<a?t[i++]:n[c++];return e};e.exports=o},b980:function(e,t,n){var r=n("d039"),a=n("5c6c");e.exports=!r((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",a(1,7)),7!==e.stack)}))},c770:function(e,t,n){var r=n("e330"),a=r("".replace),o=function(e){return String(Error(e).stack)}("zxcasd"),i=/\n\s*at [^:]*:[^\n]*/,c=i.test(o);e.exports=function(e,t){if(c&&"string"==typeof e)while(t--)e=a(e,i,"");return e}},d28b:function(e,t,n){var r=n("746f");r("iterator")},d401:function(e,t,n){var r=n("6eeb"),a=n("aa1f"),o=Error.prototype;o.toString!==a&&r(o,"toString",a)},d998:function(e,t,n){var r=n("342f");e.exports=/MSIE|Trident/.test(r)},d9e2:function(e,t,n){var r=n("23e7"),a=n("da84"),o=n("2ba4"),i=n("e5cb"),c="WebAssembly",s=a[c],u=7!==Error("e",{cause:7}).cause,l=function(e,t){var n={};n[e]=i(e,t,u),r({global:!0,forced:u},n)},d=function(e,t){if(s&&s[e]){var n={};n[e]=i(c+"."+e,t,u),r({target:c,stat:!0,forced:u},n)}};l("Error",(function(e){return function(t){return o(e,this,arguments)}})),l("EvalError",(function(e){return function(t){return o(e,this,arguments)}})),l("RangeError",(function(e){return function(t){return o(e,this,arguments)}})),l("ReferenceError",(function(e){return function(t){return o(e,this,arguments)}})),l("SyntaxError",(function(e){return function(t){return o(e,this,arguments)}})),l("TypeError",(function(e){return function(t){return o(e,this,arguments)}})),l("URIError",(function(e){return function(t){return o(e,this,arguments)}})),d("CompileError",(function(e){return function(t){return o(e,this,arguments)}})),d("LinkError",(function(e){return function(t){return o(e,this,arguments)}})),d("RuntimeError",(function(e){return function(t){return o(e,this,arguments)}}))},e01a:function(e,t,n){"use strict";var r=n("23e7"),a=n("83ab"),o=n("da84"),i=n("e330"),c=n("1a2d"),s=n("1626"),u=n("3a9b"),l=n("577e"),d=n("9bf2").f,b=n("e893"),f=o.Symbol,p=f&&f.prototype;if(a&&s(f)&&(!("description"in p)||void 0!==f().description)){var g={},m=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),t=u(p,this)?new f(e):void 0===e?f():f(e);return""===e&&(g[t]=!0),t};b(m,f),m.prototype=p,p.constructor=m;var v="Symbol(test)"==String(f("test")),h=i(p.toString),O=i(p.valueOf),j=/^Symbol\((.*)\)[^)]+$/,y=i("".replace),x=i("".slice);d(p,"description",{configurable:!0,get:function(){var e=O(this),t=h(e);if(c(g,e))return"";var n=v?x(t,7,-1):y(t,j,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:m})}},e391:function(e,t,n){var r=n("577e");e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:r(e)}},e5cb:function(e,t,n){"use strict";var r=n("d066"),a=n("1a2d"),o=n("9112"),i=n("3a9b"),c=n("d2bb"),s=n("e893"),u=n("7156"),l=n("e391"),d=n("ab36"),b=n("c770"),f=n("b980"),p=n("c430");e.exports=function(e,t,n,g){var m=g?2:1,v=e.split("."),h=v[v.length-1],O=r.apply(null,v);if(O){var j=O.prototype;if(!p&&a(j,"cause")&&delete j.cause,!n)return O;var y=r("Error"),x=t((function(e,t){var n=l(g?t:e,void 0),r=g?new O(e):new O;return void 0!==n&&o(r,"message",n),f&&o(r,"stack",b(r.stack,2)),this&&i(j,this)&&u(r,this,x),arguments.length>m&&d(r,arguments[m]),r}));if(x.prototype=j,"Error"!==h&&(c?c(x,y):s(x,y,{name:!0})),s(x,O),!p)try{j.name!==h&&o(j,"name",h),j.constructor=x}catch(w){}return x}}},f74b:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),a={class:"container mx-auto mt-6"},o={class:"md:grid md:grid-cols-3 md:gap-4"},i={class:"col-span-1"},c={class:"col-span-2"},s={class:"bg-white rounded border border-gray-200 relative flex flex-col"},u={class:"px-6 pt-6 pb-5 font-bold border-b border-gray-200"},l={class:"card-title"},d=Object(r["i"])("i",{class:"fa fa-compact-disc float-right text-green-400 text-2xl"},null,-1),b={class:"p-6"};function f(e,t,n,f,p,g){var m=Object(r["I"])("app-upload"),v=Object(r["I"])("composition-item");return Object(r["A"])(),Object(r["h"])("section",a,[Object(r["i"])("div",o,[Object(r["i"])("div",i,[Object(r["k"])(m,{ref:"upload",addSong:g.addSong},null,8,["addSong"])]),Object(r["i"])("div",c,[Object(r["i"])("div",s,[Object(r["i"])("div",u,[Object(r["i"])("span",l,Object(r["L"])(e.$t("manage.my_songs")),1),d]),Object(r["i"])("div",b,[(Object(r["A"])(!0),Object(r["h"])(r["a"],null,Object(r["H"])(p.songs,(function(e,t){return Object(r["A"])(),Object(r["f"])(v,{key:e.docID,song:e,updateSong:g.updateSong,index:t,removeSong:g.removeSong,updateUnsavedFlag:g.updateUnsavedFlag},null,8,["song","updateSong","index","removeSong","updateUnsavedFlag"])})),128))])])])])])}var p=n("5530"),g=n("1da1"),m=(n("96cf"),n("4160"),n("d3b7"),n("159b"),n("a434"),n("b0c0"),{class:"bg-white rounded border border-gray-200 relative flex flex-col"}),v={class:"px-6 pt-6 pb-5 font-bold border-b border-gray-200"},h={class:"card-title"},O=Object(r["i"])("i",{class:"fas fa-upload float-right text-green-400 text-2xl"},null,-1),j={class:"p-6"},y=Object(r["i"])("h5",null,"Drop your files here",-1),x=[y],w=Object(r["i"])("hr",{class:"my-6"},null,-1),_={class:"flex h-4 overflow-hidden bg-gray-200 rounded"};function k(e,t,n,a,o,i){return Object(r["A"])(),Object(r["h"])("div",m,[Object(r["i"])("div",v,[Object(r["i"])("span",h,Object(r["L"])(e.$t("manage.upload")),1),O]),Object(r["i"])("div",j,[Object(r["i"])("div",{class:Object(r["t"])(["w-full px-10 py-20 rounded text-center cursor-pointer border border-dashed border-gray-400 text-gray-400 transition duration-500 hover:text-white hover:bg-green-400 hover:border-green-400 hover:border-solid",{"bg-green-400 border-green-400 border-solid":o.is_dragover}]),onDrag:t[0]||(t[0]=Object(r["V"])((function(){}),["prevent","stop"])),onDragstart:t[1]||(t[1]=Object(r["V"])((function(){}),["prevent","stop"])),onDragend:t[2]||(t[2]=Object(r["V"])((function(e){return o.is_dragover=!1}),["prevent","stop"])),onDragover:t[3]||(t[3]=Object(r["V"])((function(e){return o.is_dragover=!0}),["prevent","stop"])),onDragenter:t[4]||(t[4]=Object(r["V"])((function(e){return o.is_dragover=!0}),["prevent","stop"])),onDragleave:t[5]||(t[5]=Object(r["V"])((function(e){return o.is_dragover=!1}),["prevent","stop"])),onDrop:t[6]||(t[6]=Object(r["V"])((function(e){return i.upload(e)}),["prevent","stop"]))},x,34),Object(r["i"])("input",{type:"file",multiple:"",onChange:t[7]||(t[7]=function(e){return i.upload(e)})},null,32),w,(Object(r["A"])(!0),Object(r["h"])(r["a"],null,Object(r["H"])(o.uploads,(function(e){return Object(r["A"])(),Object(r["h"])("div",{class:"mb-4",key:e.name},[Object(r["i"])("div",{class:Object(r["t"])(["font-bold text-sm",e.text_class])},[Object(r["i"])("i",{class:Object(r["t"])(e.icon)},null,2),Object(r["j"])(" "+Object(r["L"])(e.name),1)],2),Object(r["i"])("div",_,[Object(r["i"])("div",{class:Object(r["t"])(["transition-all progress-bar",e.variant]),style:Object(r["u"])({width:e.current_progress+"%"})},null,6)])])})),128))])])}n("277d");function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e){if(Array.isArray(e))return S(e)}n("a4d3"),n("e01a"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function A(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n("fb6a"),n("ac1f"),n("00b4");function I(e,t){if(e){if("string"===typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}n("d9e2"),n("d401");function L(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function R(e){return E(e)||A(e)||I(e)||L()}var U=n("b79f"),F={name:"Upload",data:function(){return{is_dragover:!1,uploads:[]}},props:["addSong"],methods:{upload:function(e){var t=this;this.is_dragover=!1;var n=e.dataTransfer?R(e.dataTransfer.files):R(e.target.files);n.forEach((function(e){if("audio/mpeg"===e.type)if(navigator.onLine){var n=U["d"].ref(),r=n.child("songs/".concat(e.name)),a=r.put(e),o=t.uploads.push({task:a,current_progress:0,name:e.name,variant:"bg-blue-400",icon:"fas fa-spinner fa-spin",text_class:""})-1;a.on("state_changed",(function(e){var n=e.bytesTransferred/e.totalBytes*100;t.uploads[o].current_progress=n}),(function(){t.uploads[o].variant="bg-red-400",t.uploads[o].icon="fas fa-times",t.uploads[o].text_class="text-red-400"}),Object(g["a"])(regeneratorRuntime.mark((function e(){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={uid:U["a"].currentUser.uid,display_name:U["a"].currentUser.displayName,original_name:a.snapshot.ref.name,modified_name:a.snapshot.ref.name,genre:"",comment_count:0},e.next=3,a.snapshot.ref.getDownloadURL();case 3:return n.url=e.sent,e.next=6,U["c"].add(n);case 6:return r=e.sent,e.next=9,r.get();case 9:i=e.sent,t.addSong(i),t.uploads[o].variant="bg-green-400",t.uploads[o].icon="fas fa-check",t.uploads[o].text_class="text-green-400";case 14:case"end":return e.stop()}}),e)}))))}else t.uploads.push({task:{},current_progress:100,name:e.name,variant:"bg-red-400",icon:"fas fa-times",text_class:"text-red-400"})}))},cancelUploads:function(){this.uploads.forEach((function(e){e.task.cancel()}))}},beforeUnmount:function(){this.uploads.forEach((function(e){e.task.cancel()}))}},C=n("6b0d"),D=n.n(C);const N=D()(F,[["render",k]]);var P=N,T={class:"border border-gray-200 p-3 mb-4 rounded"},V={class:"inline-block text-2xl font-bold"},$=Object(r["i"])("i",{class:"fa fa-times"},null,-1),M=[$],q=Object(r["i"])("i",{class:"fa fa-pencil-alt"},null,-1),Y=[q],G={class:"mb-3"},H={class:"inline-block mb-2"},z={class:"mb-3"},J={class:"inline-block mb-2"},B=["disabled"],K=["disabled"];function W(e,t,n,a,o,i){var c=Object(r["I"])("vee-field"),s=Object(r["I"])("ErrorMessage"),u=Object(r["I"])("vee-form");return Object(r["A"])(),Object(r["h"])("div",T,[Object(r["U"])(Object(r["i"])("div",null,[Object(r["i"])("h4",V,Object(r["L"])(n.song.modified_name),1),Object(r["i"])("button",{class:"ml-1 py-1 px-2 text-sm rounded text-white bg-red-600 float-right",onClick:t[0]||(t[0]=Object(r["V"])((function(){return i.deleteSong&&i.deleteSong.apply(i,arguments)}),["prevent"]))},M),Object(r["i"])("button",{class:"ml-1 py-1 px-2 text-sm rounded text-white bg-blue-600 float-right",onClick:t[1]||(t[1]=Object(r["V"])((function(e){return o.showForm=!o.showForm}),["prevent"]))},Y)],512),[[r["P"],!o.showForm]]),Object(r["U"])(Object(r["i"])("div",null,[o.show_alert?(Object(r["A"])(),Object(r["h"])("div",{key:0,class:Object(r["t"])(["text-white text-center font-bold p-4 mb-4",o.alert_variant])},Object(r["L"])(o.alert_message),3)):Object(r["g"])("",!0),Object(r["k"])(u,{"validation-schema":o.schema,"initial-values":n.song,onSubmit:i.edit},{default:Object(r["T"])((function(){return[Object(r["i"])("div",G,[Object(r["i"])("label",H,Object(r["L"])(e.$t("edit.title")),1),Object(r["k"])(c,{type:"text",name:"modified_name",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",onInput:t[2]||(t[2]=function(e){return n.updateUnsavedFlag(!0)})}),Object(r["k"])(s,{class:"text-red-600",name:"modified_name"})]),Object(r["i"])("div",z,[Object(r["i"])("label",J,Object(r["L"])(e.$t("edit.genre")),1),Object(r["k"])(c,{type:"text",name:"genre",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",onInput:t[3]||(t[3]=function(e){return n.updateUnsavedFlag(!0)})}),Object(r["k"])(s,{class:"text-red-600",name:"genre"})]),Object(r["i"])("button",{type:"submit",class:"py-1.5 px-3 rounded text-white bg-green-600",disabled:o.in_submission},Object(r["L"])(e.$t("edit.submit")),9,B),Object(r["i"])("button",{type:"button",class:"py-1.5 px-3 rounded text-white bg-gray-600",disabled:o.in_submission,onClick:t[4]||(t[4]=Object(r["V"])((function(e){return o.showForm=!1}),["prevent"]))},Object(r["L"])(e.$t("edit.back")),9,K)]})),_:1},8,["validation-schema","initial-values","onSubmit"])],512),[[r["P"],o.showForm]])])}n("a9e3");var X={name:"CompositionItem",props:{song:{type:Object,required:!0},updateSong:{type:Function,required:!0},index:{type:Number,required:!0},removeSong:{type:Function,required:!0},updateUnsavedFlag:{type:Function}},data:function(){return{showForm:!1,schema:{modified_name:"required",genre:"alpha_spaces"},in_submission:!1,show_alert:!1,alert_variant:"bg-blue-500",alert_message:"Please wait! Updating song info."}},methods:{edit:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.in_submission=!0,t.show_alert=!0,t.alert_variant="bg-blue-500",t.alert_message="Please wait! Updating song info.",n.prev=4,n.next=7,U["c"].doc(t.song.docID).update(e);case 7:n.next=15;break;case 9:return n.prev=9,n.t0=n["catch"](4),t.in_submission=!1,t.alert_variant="bg-red-500",t.alert_message="Something went wrong! Try again later",n.abrupt("return");case 15:t.updateSong(t.index,e),t.updateUnsavedFlag(!1),t.in_submission=!1,t.alert_variant="bg-green-500",t.alert_message="Success!";case 20:case"end":return n.stop()}}),n,null,[[4,9]])})))()},deleteSong:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=U["d"].ref(),r=n.child("songs/".concat(e.song.original_name)),t.next=4,r["delete"]();case 4:return t.next=6,U["c"].doc(e.song.docID)["delete"]();case 6:e.removeSong(e.index);case 7:case"end":return t.stop()}}),t)})))()}}};const Q=D()(X,[["render",W]]);var Z=Q,ee={name:"manage",components:{AppUpload:P,CompositionItem:Z},data:function(){return{songs:[],unsavedFlag:!1}},handleClick:function(){},created:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,U["c"].where("uid","==",U["a"].currentUser.uid).get();case 2:n=t.sent,n.forEach(e.addSong);case 4:case"end":return t.stop()}}),t)})))()},methods:{updateSong:function(e,t){this.songs[e].modified_name=t.modified_name,this.songs[e].genre=t.genre},removeSong:function(e){this.songs.splice(e,1)},addSong:function(e){var t=Object(p["a"])(Object(p["a"])({},e.data()),{},{docID:e.id});this.songs.push(t)},updateUnsavedFlag:function(e){this.unsavedFlag=e}},beforeRouteLeave:function(e,t,n){if(this.unsavedFlag){var r=confirm("You have unsaved changes. Are you sure you want to leave?");n(r)}else n()}};const te=D()(ee,[["render",f]]);t["default"]=te},fb6a:function(e,t,n){"use strict";var r=n("23e7"),a=n("da84"),o=n("e8b5"),i=n("68ee"),c=n("861d"),s=n("23cb"),u=n("07fa"),l=n("fc6a"),d=n("8418"),b=n("b622"),f=n("1dde"),p=n("f36a"),g=f("slice"),m=b("species"),v=a.Array,h=Math.max;r({target:"Array",proto:!0,forced:!g},{slice:function(e,t){var n,r,a,b=l(this),f=u(b),g=s(e,f),O=s(void 0===t?f:t,f);if(o(b)&&(n=b.constructor,i(n)&&(n===v||o(n.prototype))?n=void 0:c(n)&&(n=n[m],null===n&&(n=void 0)),n===v||void 0===n))return p(b,g,O);for(r=new(void 0===n?v:n)(h(O-g,0)),a=0;g<O;g++,a++)g in b&&d(r,a,b[g]);return r.length=a,r}})}}]);
//# sourceMappingURL=groupedChunk.79231cad.js.map